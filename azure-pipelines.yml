trigger:
- master
- releases/*
- node6hotfixes/*

steps:
- bash: echo "##vso[task.prependpath]$CONDA/bin"
  displayName: Add conda to PATH
- bash: conda create --offline --name AZDO -y
  displayName: Create Anaconda environment
- bash: |
    conda config --add channels https://token:${ARTIFACTS_CONDA_TOKEN}@pkgs.dev.azure.com/codesharing-SU0/abpowell/_packaging/abpowellTestFeed/conda/repo/pkgs/msys2
    conda config --add channels https://token:${ARTIFACTS_CONDA_TOKEN}@pkgs.dev.azure.com/codesharing-SU0/abpowell/_packaging/abpowellTestFeed/conda/repo/pkgs/r
    conda config --add channels https://token:${ARTIFACTS_CONDA_TOKEN}@pkgs.dev.azure.com/codesharing-SU0/abpowell/_packaging/abpowellTestFeed/conda/repo/pkgs/main
    conda config --remove channels defaults
    conda config --show
  env:
    ARTIFACTS_CONDA_TOKEN: $(System.AccessToken)
  displayName: Setting up .condarc
- bash: |
    source activate AZDO
    conda install numpy -y
  displayName: Activating and Using Conda environment
  env:
    ARTIFACTS_CONDA_TOKEN: $(System.AccessToken)