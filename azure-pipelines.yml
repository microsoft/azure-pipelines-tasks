trigger:
 - master
 - develop

jobs:
- job: get_tasks
  condition: eq(variables['Build.Reason'], 'PullRequest')
  steps:
  - script: git pull
    continueOnError: true
    displayName: 'git pull'

  - script: git checkout develop
    displayName: 'git checkout develop'

  - script: |
      export tasks=$(node ./ci/testing/getTaskNames.js $(git diff --name-only origin/master))
      ##vso[task.setvariable variable=tasksVar]$tasks
      echo "Tasks changed: $tasks"
    displayName: 'Get changed tasks names'

  - script: |
      echo "$tasks"
      echo "-------------------"
      echo "$(tasks)"
      echo "-------------------"
      echo "$tasksVar"
      echo "-------------------"
      echo "$(tasksVar)"
    displayName: 'Use tasks names'
