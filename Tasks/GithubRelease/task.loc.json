{
  "id": "7B5A6198-ADF8-4B16-9939-7ADDF85708B2",
  "name": "GithubRelease",
  "friendlyName": "ms-resource:loc.friendlyName",
  "description": "ms-resource:loc.description",
  "helpMarkDown": "ms-resource:loc.helpMarkDown",
  "category": "Utility",
  "releaseNotes": "ms-resource:loc.releaseNotes",
  "visibility": [
    "Build",
    "Release"
  ],
  "author": "Microsoft Corporation",
  "preview": true,
  "version": {
    "Major": 0,
    "Minor": 0,
    "Patch": 0
  },
  "demands": [],
  "minimumAgentVersion": "2.0.0",
  "inputs": [
    {
      "name": "githubEndpoint",
      "type": "connectedService:github",
      "label": "ms-resource:loc.input.label.githubEndpoint",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "ms-resource:loc.input.help.githubEndpoint"
    },
    {
      "name": "repositoryName",
      "type": "pickList",
      "label": "ms-resource:loc.input.label.repositoryName",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "ms-resource:loc.input.help.repositoryName",
      "properties": {
        "DisableManageLink": "True"
      }
    },
    {
      "name": "action",
      "type": "pickList",
      "label": "ms-resource:loc.input.label.action",
      "defaultValue": "create",
      "required": true,
      "helpMarkDown": "ms-resource:loc.input.help.action",
      "options": {
        "create": "Create",
        "edit": "Edit",
        "discard": "Discard"
      }
    },
    {
      "name": "target",
      "type": "string",
      "label": "ms-resource:loc.input.label.target",
      "defaultValue": "$(Build.SourceVersion)",
      "required": true,
      "visibleRule": "action = create",
      "helpMarkDown": "ms-resource:loc.input.help.target"
    },
    {
      "name": "tagSelection",
      "type": "radio",
      "label": "ms-resource:loc.input.label.tagSelection",
      "required": true,
      "defaultValue": "auto",
      "visibleRule": "action = create",
      "options": {
        "auto": "Use tag associated with commit",
        "manual": "Specify tags manually"
      }
    },
    {
      "name": "tag",
      "type": "string",
      "label": "ms-resource:loc.input.label.tag",
      "defaultValue": "",
      "required": true,
      "visibleRule": "action = edit || action = discard || tagSelection = manual",
      "helpMarkDown": "ms-resource:loc.input.help.tag"
    },
    {
      "name": "releaseTitle",
      "type": "string",
      "label": "ms-resource:loc.input.label.releaseTitle",
      "defaultValue": "",
      "required": false,
      "visibleRule": "action = create || action = edit",
      "helpMarkDown": "ms-resource:loc.input.help.releaseTitle"
    },
    {
      "name": "releaseNotesSelection",
      "type": "radio",
      "label": "ms-resource:loc.input.label.releaseNotesSelection",
      "required": false,
      "defaultValue": "input",
      "visibleRule": "action = create || action = edit",
      "options": {
        "input": "Enter Release Note",
        "file": "Select Release Note File"
      }
    },
    {
      "name": "releaseNotesInput",
      "type": "multiLine",
      "label": "ms-resource:loc.input.label.releaseNotesInput",
      "required": false,
      "helpMarkDown": "ms-resource:loc.input.help.releaseNotesInput",
      "visibleRule": "releaseNotesSelection = input",
      "properties": {
        "resizable": "true",
        "rows": "4",
        "maxLength": "5000"
      }
    },
    {
      "name": "releaseNotesFile",
      "type": "filePath",
      "label": "ms-resource:loc.input.label.releaseNotesFile",
      "required": false,
      "helpMarkDown": "ms-resource:loc.input.help.releaseNotesFile",
      "visibleRule": "releaseNotesSelection = file"
    },
    {
      "name": "githubReleaseAsset",
      "type": "input",
      "label": "ms-resource:loc.input.label.githubReleaseAsset",
      "defaultValue": "",
      "required": false,
      "visibleRule": "action = create || action = edit",
      "helpMarkDown": "ms-resource:loc.input.help.githubReleaseAsset"
    },
    {
      "name": "assetUploadMode",
      "type": "radio",
      "label": "ms-resource:loc.input.label.assetUploadMode",
      "required": false,
      "defaultValue": "delete",
      "visibleRule": "action = edit",
      "options": {
        "delete": "Delete exisiting assets",
        "replace": "Replace existing assets"
      }
    },
    {
      "name": "isDraft",
      "type": "boolean",
      "label": "ms-resource:loc.input.label.isDraft",
      "defaultValue": "false",
      "required": true,
      "visibleRule": "action = create || action = edit",
      "helpMarkDown": "ms-resource:loc.input.help.isDraft"
    },
    {
      "name": "isPrerelease",
      "type": "boolean",
      "label": "ms-resource:loc.input.label.isPrerelease",
      "defaultValue": "false",
      "required": true,
      "visibleRule": "action = create || action = edit",
      "helpMarkDown": "ms-resource:loc.input.help.isPrerelease"
    }
  ],
  "sourceDefinitions": [
    {
      "target": "repositoryName",
      "endpoint": "/$(system.teamProject)/_apis/sourceProviders/GitHub/repositories?serviceEndpointId=$(githubEndpoint)",
      "selector": "jsonpath:$.repositories[*].id",
      "keySelector": "jsonpath:$.repositories[*].id",
      "authKey": "tfs:teamfoundation"
    }
  ],
  "instanceNameFormat": "ms-resource:loc.instanceNameFormat",
  "execution": {
    "Node": {
      "target": "main.js"
    }
  },
  "messages": {
    "CreatingRelease": "ms-resource:loc.messages.CreatingRelease",
    "CreateReleaseError": "ms-resource:loc.messages.CreateReleaseError",
    "CreateReleaseSuccess": "ms-resource:loc.messages.CreateReleaseSuccess",
    "DraftReleaseCreatedSuccess": "ms-resource:loc.messages.DraftReleaseCreatedSuccess",
    "DiscardingRelease": "ms-resource:loc.messages.DiscardingRelease",
    "DiscardReleaseError": "ms-resource:loc.messages.DiscardReleaseError",
    "DiscardReleaseSuccess": "ms-resource:loc.messages.DiscardReleaseSuccess",
    "EditingRelease": "ms-resource:loc.messages.EditingRelease",
    "EditReleaseError": "ms-resource:loc.messages.EditReleaseError",
    "EditReleaseSuccess": "ms-resource:loc.messages.EditReleaseSuccess",
    "GetReleaseByTagError": "ms-resource:loc.messages.GetReleaseByTagError",
    "GetTagsError": "ms-resource:loc.messages.GetTagsError",
    "GetBranchError": "ms-resource:loc.messages.GetBranchError",
    "MissingAssetError": "ms-resource:loc.messages.MissingAssetError",
    "DuplicateAssetFound": "ms-resource:loc.messages.DuplicateAssetFound",
    "DeletingDuplicateAsset": "ms-resource:loc.messages.DeletingDuplicateAsset",
    "DuplicateAssetDeletedSuccessfully": "ms-resource:loc.messages.DuplicateAssetDeletedSuccessfully",
    "AssetDeletedSuccessfully": "ms-resource:loc.messages.AssetDeletedSuccessfully",
    "NoTagFound": "ms-resource:loc.messages.NoTagFound",
    "ErrorDeletingDuplicateAsset": "ms-resource:loc.messages.ErrorDeletingDuplicateAsset",
    "ErrorDeletingAsset": "ms-resource:loc.messages.ErrorDeletingAsset",
    "UploadingAsset": "ms-resource:loc.messages.UploadingAsset",
    "UploadAssetError": "ms-resource:loc.messages.UploadAssetError",
    "UploadAssetSuccess": "ms-resource:loc.messages.UploadAssetSuccess",
    "ReleaseNotesFileIsDirectoryError": "ms-resource:loc.messages.ReleaseNotesFileIsDirectoryError",
    "AssetIsDirectoryError": "ms-resource:loc.messages.AssetIsDirectoryError"
  }
}