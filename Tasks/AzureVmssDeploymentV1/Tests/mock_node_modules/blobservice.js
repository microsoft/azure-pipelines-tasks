'use strict';

var util = require('util');

function BlobServiceClient(storageAccountName, credential) {
  this._storageAccountName = storageAccountName;
  this.credential = credential;
}

BlobServiceClient.prototype.getContainerClient= function(containername){
  console.log("BlobServiceClient.getContainerClient is called with containername " + containername );
}

BlobServiceClient.prototype.uploadFile = function (localDirPath) {
  console.log("BlobServiceClient.uploadFile is called with path " + localDirPath );
  if (process.env["_uploadingFails_"] === "true") {
    throw "Error while uploading blobs: some error";
  }

  var uploadedUris = [];
  uploadedUris.push(this._storageAccountName + ".blob.core.windows.net/vststasks/100-12345/200/5/folder1/file1");
  uploadedUris.push(this._storageAccountName + ".blob.core.windows.net/vststasks/100-12345/200/5/folder1/folder2/file2");

  return Promise.resolve(uploadedUris);
}

module.exports.BlobServiceClient = BlobServiceClient;

